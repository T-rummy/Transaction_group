{% extends "base.html" %}
{% block content %}
<h2 class="text-2xl font-semibold mb-6">Statistics & Analytics</h2>

<div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
    <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
        <p class="text-sm text-gray-500">Total Expenses</p>
        <p class="text-2xl font-bold text-gray-800">${{ total_expenses }}</p>
    </div>
    <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
        <p class="text-sm text-gray-500">Total Transactions</p>
        <p class="text-2xl font-bold text-gray-800">{{ total_transactions }}</p>
    </div>
    <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
        <p class="text-sm text-gray-500">Avg Daily Spending</p>
        <p class="text-2xl font-bold text-gray-800">${{ avg_daily }}</p>
    </div>
    <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
        <p class="text-sm text-gray-500">Avg Monthly Spending</p>
        <p class="text-2xl font-bold text-gray-800">${{ avg_monthly }}</p>
    </div>
</div>

<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
        <h3 class="font-semibold mb-2">Spending by Category</h3>
        <canvas id="categoryChart"></canvas>
    </div>
    <div class="bg-white p-4 rounded-lg shadow border border-gray-100">
        <h3 class="font-semibold mb-2">Monthly Spending Trend</h3>
        <canvas id="monthlyChart"></canvas>
    </div>
</div>

<script>
    const categoryCtx = document.getElementById('categoryChart').getContext('2d');
    new Chart(categoryCtx, {
        type: 'doughnut',
        data: {
            labels: {{ categories|safe }},
            datasets: [{
                data: {{ category_data|safe }},
                backgroundColor: ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6']
            }]
        }
    });

    const monthlyCtx = document.getElementById('monthlyChart').getContext('2d');
    new Chart(monthlyCtx, {
        type: 'line',
         animations: {
      tension: {
        duration: 1000,
        easing: 'linear',
        from: 1,
        to: 0,
        loop: true
      }},
        data: {
            labels: {{ months|safe }},
            datasets: [{
                label: 'Spending',
                data: {{ monthly_data|safe }},
                borderColor: '#F54927',
                fill: false,
                
            }]
        }
    });
</script>
{% endblock %}
