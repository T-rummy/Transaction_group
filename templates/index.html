{% extends "base.html" %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <h1 class="hero-title">Smart Expense Tracking</h1>
        <p class="hero-subtitle">Track your spending, set limits, and stay on budget with intelligent insights</p>
        <div class="flex gap-4 justify-center">
            <a href="{{ url_for('scan_receipt') }}" class="btn btn-primary btn-lg">
                📷 Scan Receipt
            </a>
            <a href="{{ url_for('transactions') }}" class="btn btn-secondary btn-lg">
                📊 View Transactions
            </a>
        </div>
    </div>
</section>

<!-- Flash Messages -->
{% with messages = get_flashed_messages() %}
    {% if messages %}
        <div class="container mb-8">
            {% for message in messages %}
                <div class="alert alert-success fade-in">
                    {{ message }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endwith %}

<!-- Quick Actions -->
<section class="container mb-12">
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="card text-center">
            <div class="card-header">
                <h3 class="card-title">📝 Add Transaction</h3>
                <p class="card-subtitle">Manually enter expenses</p>
            </div>
            <form action="{{ url_for('add_transaction') }}" method="POST" class="space-y-4">
                <div class="form-group">
                    <label class="form-label">Transaction Name</label>
                    <input type="text" name="name" class="form-input" placeholder="e.g., Coffee at Starbucks" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Amount ($)</label>
                    <input type="number" step="0.01" name="amount" class="form-input" placeholder="0.00" required>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Category</label>
                    <select name="category" class="form-input form-select" required>
                        <option value="">Select Category</option>
                        <option value="Food">🍽️ Food & Dining</option>
                        <option value="Transportation">🚗 Transportation</option>
                        <option value="Shopping">🛍️ Shopping</option>
                        <option value="Entertainment">🎬 Entertainment</option>
                        <option value="Bills">💳 Bills & Utilities</option>
                        <option value="Healthcare">🏥 Healthcare</option>
                        <option value="Education">📚 Education</option>
                        <option value="Travel">✈️ Travel</option>
                        <option value="Other">📦 Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label">Date</label>
                    <input type="date" name="date" class="form-input" value="{{ today }}" required>
                </div>
                
                <button type="submit" class="btn btn-primary w-full">
                    💾 Save Transaction
                </button>
            </form>
        </div>

        <div class="card text-center">
            <div class="card-header">
                <h3 class="card-title">📷 Scan Receipt</h3>
                <p class="card-subtitle">AI-powered receipt scanning</p>
            </div>
            <div class="space-y-4">
                <div class="p-6 bg-gradient-to-br from-primary-glow to-secondary-glow rounded-xl">
                    <div class="text-4xl mb-4">📱</div>
                    <h4 class="font-semibold mb-2">Smart OCR Technology</h4>
                    <p class="text-sm text-secondary">Take a photo of any receipt and let AI extract the details automatically</p>
                </div>
                <a href="{{ url_for('scan_receipt') }}" class="btn btn-primary w-full">
                    Start Scanning
                </a>
            </div>
        </div>

        <div class="card text-center">
            <div class="card-header">
                <h3 class="card-title">🎯 Set Limits</h3>
                <p class="card-subtitle">Stay on budget</p>
            </div>
            <div class="space-y-4">
                <div class="p-6 bg-gradient-to-br from-accent-glow to-success-glow rounded-xl">
                    <div class="text-4xl mb-4">🎯</div>
                    <h4 class="font-semibold mb-2">Smart Alerts</h4>
                    <p class="text-sm text-secondary">Get notified when you approach your spending limits</p>
                </div>
                <a href="{{ url_for('limits') }}" class="btn btn-secondary w-full">
                    Manage Limits
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Quick Stats Preview -->
<section class="container mb-12">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">📈 This Month's Overview</h3>
            <p class="card-subtitle">Quick glance at your spending patterns</p>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
            <div class="stat-card">
                <div class="stat-value">${{ total_spending|default('0.00') }}</div>
                <div class="stat-label">Total Spending</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ transaction_count|default('0') }}</div>
                <div class="stat-label">Transactions</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ avg_transaction|default('$0.00') }}</div>
                <div class="stat-label">Average Transaction</div>
            </div>
            <div class="stat-card">
                <div class="stat-value">{{ top_category|default('N/A') }}</div>
                <div class="stat-label">Top Category</div>
            </div>
        </div>
        <div class="text-center mt-6">
            <a href="{{ url_for('stats') }}" class="btn btn-primary">
                View Detailed Analytics
            </a>
        </div>
    </div>
</section>

<!-- Recent Transactions -->
<section class="container">
    <div class="card">
        <div class="card-header">
            <h3 class="card-title">🕒 Recent Transactions</h3>
            <p class="card-subtitle">Your latest spending activity</p>
        </div>
        {% if recent_transactions %}
            <div class="table-container">
                <table class="table">
                    <thead>
                        <tr>
                            <th>Date</th>
                            <th>Name</th>
                            <th>Category</th>
                            <th>Amount</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for tx in recent_transactions[:5] %}
                        <tr>
                            <td>{{ tx.Date }}</td>
                            <td>{{ tx.Name }}</td>
                            <td>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-primary-glow text-primary">
                                    {{ tx.Category }}
                                </span>
                            </td>
                            <td class="font-semibold">${{ "%.2f"|format(tx.Amount|float) }}</td>
                        </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="text-center mt-6">
                <a href="{{ url_for('transactions') }}" class="btn btn-secondary">
                    View All Transactions
                </a>
            </div>
        {% else %}
            <div class="text-center py-12">
                <div class="text-6xl mb-4">📝</div>
                <h4 class="text-xl font-semibold mb-2">No transactions yet</h4>
                <p class="text-secondary mb-6">Start tracking your expenses by adding your first transaction</p>
                <a href="{{ url_for('scan_receipt') }}" class="btn btn-primary">
                    📷 Scan Your First Receipt
                </a>
            </div>
        {% endif %}
    </div>
</section>
{% endblock %}
