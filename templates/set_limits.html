{% extends "base.html" %}

{% block title %}Set Spending Limits{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold mb-6">Set Spending Limits</h1>

<form action="/set_limit" method="POST" class="space-y-5 max-w-md">
    <div>
        <label class="block text-sm font-medium">Category</label>
        <select name="category" id="limit-category" 
                class="w-full p-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-200" 
                required>
            <option value="Food">Food</option>
            <option value="Travel">Travel</option>
            <option value="Transportation">Transportation</option>
            <option value="Bills/Utilities">Bills/Utilities</option>
            <option value="Academic">Academic</option>
            <option value="Health">Health</option>
        </select>
    </div>

    <div>
        <label class="block text-sm font-medium">Limit Amount ($)</label>
        <input type="number" step="0.01" name="limit" id="limit-amount" 
               class="w-full p-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-200" 
               required>
    </div>

    <div>
        <label class="block text-sm font-medium">Alert Threshold (%)</label>
        <input type="number" name="alert_threshold" id="alert-threshold" value="80" min="50" max="100"
               class="w-full p-2 rounded border border-gray-300 focus:ring-2 focus:ring-blue-200">
    </div>

    <button class="w-full bg-blue-600 hover:bg-blue-500 text-white py-2 rounded">
        Set Limit
    </button>
</form>

{% if limits %}
    <h2 class="text-xl font-semibold mt-8 mb-4">Current Limits</h2>
    <div class="bg-white shadow rounded p-4">
        <ul class="divide-y divide-gray-200">
            {% for category, data in limits.items() %}
                <li class="py-2 flex justify-between">
                    <span>{{ category }}</span>
                    <span>${{ data.limit }} (Alert: {{ data.alert_threshold }}%)</span>
                </li>
            {% endfor %}
        </ul>
    </div>
{% endif %}
{% endblock %}
